# 第七章 - 項目管理軟件 -- Redmine

我们曾经统计过，项目從第一版立项到上线，总共需要完成多少件任务。结论是大致上需要 600 个。

600 件任务对非软体从业界的人来说，听起来是天文数字。对我来说却是家常便饭。

那么这么多的任务，到底是要怎么管理呢？

很久以前，我也对这件事情很有疑惑。直到了我加入了网路公司，我才发现这世界别有洞天，不只有软件，种类还多的眼花缭乱。

## 协作软件

说到项目的协作软件。有非常多种类。依据每个项目的性质不同，其实适合的软件也不一样。

### 小型项目 -- Trello （看板式）

一般小型协作项目的开发，我通常会推荐 Trello。（30 个以内待办事项需要管理）

![](https://imgur.com/wA2LLeG.png)

Trello 是看板式管理。适合待办事项状态简单型的项目（如：尚未实做，实做中，已结束）

### 中小型项目 -- Tower (列表式)

中小型项目，我推荐 Tower。（100个以内以内待办事项需要管理）

![](https://imgur.com/x5LA2Ot.png)

Tower 适合待办项目多类别型的项目。比如我写书就会用 Tower(第一章需要完成什么，第二章需要完成什么)

### 复杂型项目 -- Redmine

至于公司内部软件开发，我们用的就是重武器 Redmine。

![](https://imgur.com/Jyzb5JS.png)

Redmine 是一套开源软件。非常适合用来管理复杂的项目。这套软件里面的常见功能，跟一些复杂型项目管理软件(Trac / Jira)相似，但一些特殊功能

* 子母票（展开 User Story）

![](https://imgur.com/ltdFMn4.png)

* 里程碑 （倒数法）

![](https://imgur.com/jH6KuDa.png)

非常整合我们公司内独特流程加速前进。

## 为什么开发软件项目需要用上项目管理软件

在我还没有变成职业程序员前，我曾经以为协作是很简单的。

两个人一起工作，顶多用 email 或者 skype 软件互相沟通需求就好了。后来才发现协作这件事情并不简单。

工作内容是沟通了。但是什么时候开始做，又有多少工作要做，哪些是紧急的，那些是不重要的。待办事项一多或者成员一多简直没法管。个人项目 side project 勉强可以用纸笔或 email 纪录。但是要进入大型协作（一个项目少说10个人以上参与），就一定要用软件管理。

我才知道，连这样的问题，不但已经有解决方案了，还相当成熟。

项目管理工具可以帮到项目什么呢？

通常项目管理工具多具备这些功能：

* Issue 的主题
* Issue 的内容
* Issue 现在的状态 (新建立、已指派、已解决、已回应、已结束、已搁置...etc)
* Issue 优先权 (正常、重要、紧急、轻微、会挡路...etc.)
* Issue 发生日期
* Issue 希望解决日期
* Issue 实际解决日期
* Issue 被分派给谁
* Issue 的附件
* Isuue 的观察者

![](https://imgur.com/21KmxVE.png)

项目管理软件主要能提供以下这一些的价值：

* Issue List - 透明的列出所有需要被执行的项目
* Issue Milestone 一个地方可以列出阶段内需要被执行的项目
* Project Daily Progress 项目今日整体动态
* Issue Ticket - 一个可以记载 内容，状态、优先权、日期、分派者、观察者，且具有「permalink」、「权限控管」，且让大家可以讨论执行项目细节的地方
* Related Tickets - 可以 cross reference 或具有子票功能
* Wiki - 一个地方可以整理统合专案现在所有的相关资讯
* Personal Dashboard - 一个地方可以看到自己今天需要 Focus 进行哪些项目
* Custom Query - 一个地方能让 Manager 可以看到自己的同事正在进行哪些项目，这些项目目前的状态是什么。

## 展开 User Story

以下是我在 2010 年带领团队费时 2.5 个月开发出来的一套论坛系统。（ 75 天的速度，以2018的标准对我们团队来说是不合格的。但在2010年，这已经是闪电式开发）

开发流程也是一模一样的。我们先写好主干 User Story。然后一条一条的展开次级故事开发。

![](https://c2.staticflickr.com/8/7026/6469521821_1180cd425a_o.png)

## 利用倒数计时法管理项目

在展开大的项目故事之后，我们开始利用逆向法，结合 Redmine 的 Milestone 功能，把这些 Issue 一张一张归类到 Milestone 去。这样对每一周需要做哪些项目。就有很明确的归属。

![](https://c2.staticflickr.com/8/7160/6469526205_af3e0f4048_o.png)

从这一张票上面，就可以看到每一周明确冲刺的进度是很不一样的。

* 第一周 - 准备工程
* 第二周 - 困难技术研究
* 第三周 ~ 第五周　- 主干功能开发
* 第六周 ~ 第八周　- 次干功能开发
* 外包细节单独 Milestone 控管
* 倒数三周 UI 修正
* 倒数两周 - 封闭测试票
* 倒数一周 - 上线前细节票

每一周都有很明确的任务，要完成哪一些任务。

身为项目负责人，我在每周三四的时候，根据这些里程碑内的 issue 消化速度，也大概可以感知到项目现在的进度是落后,超前,卡住, 还是此前过于乐观，据此来调整下一周的待办事项饱和度以及优先权，甚至砍 Story。

## 扩充 Redmine 状态 - 加速协作

Redmine 默认配置只有三种状态 「新建立」=>「制作中」=> 「完成已结束」

![](https://imgur.com/nwdei7D.png)

我们会扩充到六种不同的状态，以配合真实状态中会发生的状况

![](https://imgur.com/mC6zeKS.png)

* 新建立
* 实做中
* 已回应
* 已解决
* 完成 & 结束
* 搁置不实做

#### 一般正常的解票流程可能是这样的

![](https://imgur.com/JDEqIvu.png)

#### 但 IDEA 也有可能一开始就被枪毙掉

![](https://imgur.com/l54iTFx.png)

#### 甚至来来回回改了很多遍之后，还是忍痛放弃

![](https://imgur.com/uBPEC7G.png)

## 决策与程式码整合实做 (Ticket Branch)

有时候技术改进的决策，在代码上面是无法被叙述追踪的。于是在往前追朔 debug 时，就会无意间破坏原始的设计。越改越烂。

所以我们在工程上做了一些改进。配合 Git 版本控制，希望程序员在开发功能时，以一张 Redmine Issue 作为开发单位。

每一张 Issue 的实做单独开一个 branch。branch 名称取名叫 T5267

指令 `git checkout -b T5267`

Redmine 上原始决策与设计稿

![](https://imgur.com/ENsV6gQ.png)

Git 上实际实现的代码

![](https://imgur.com/IIZIycq.png)

这样的实做方式可以让

* 每一行代码背后都能重现决策
* 程序员能够将任务切分干净，而不会有一大包任务作不完的感觉

Redmine 切任务切得当，是有办法让程序员感觉沈浸在打怪升级破关之中，而不是一个永远没有尽头解不完的大泥淖。

## 用 Redmine 开 Turbo -- 加速把 Story 切得更细，实做的更快

* 单用 User Story，可以把角色关系厘清的更干净
* 单用 Redmine 项目管理工具，可以协作的更快速

但接下来，我会介绍我们团队怎么样把速度逼到极致。

User Story 其实只是很粗的实做版本。但是实做一张母票，经过统计，平均也是再细切成 10 个子任务，逐步迭代。以下我会分析一些切票的诀窍：

### 1. 粗切 - 根据开发周期

在第一阶段，我们会根据开发周期粗切。大至归类到每个 MileStone 去。
这一类的票的粒度大致上就会是这种等级：

* 身为一个商家，我要能够在后台上架卖币广告，并且设定上架贩卖
* 身为一个消费者，我要能够在前台看到广告，并且下单购买
* 身为一个使用者，必须在站上拥有数字货币钱包，进行充值 / 提币
* 身为一个使用者，必须经过身份验证功能，才能使用完整功能
* 身为一个使用者，为了确保资产安全，必须绑定联系方式

### 2. 再切 - 根据工作天切分

比如说这一周必须要完成「身为一个商家，我要能够在后台上架卖币广告，并且设定上架贩卖」这个大 Story。
那么我们就再把这一个大 Story，再让负责的程序员细切成单天可以解决的任务。

* 身为商家，可以发布广告
* 广告可以设定溢价比例，并跟踪 CoinMarketcap 综合价格
* 上架广告必须缴交手续费
* 下架广告不可以在前台被看到，也不可以被下单

### 3. 细节 - 切成一口气可以做完的大小

每个人都喜欢自己可以一口气「破关」的感觉。所以得再把任务切到可以「一口吃」的大小

* 广告可以单独设定溢价比例
* 写一支机器人，每五分钟抓取一次 CoinMarketcap 上综合价格并存取在数据库
* 全站每五分钟更新价格，并刷新列表
* 把溢价比例与全站价格做连动

### 4. 会卡住进度的切出去

有时候，我们在做某些功能的时候，某些关键功能是无法一个人完成的，甚至得后续花上很多时间。

这时候，切票这一招就非常有用。我们内部有一个原则，凡是：

* 三小时之内没有解法
* 需要其他人给答案
* 或者需要辩论
* 或者需要非常复杂的实做，甚至外包参与

就一律将这一类的问题，开票出来。分配给其他人。

比如说钱包页面，需要展示地址，然后页面上根据地址产生 QRCODE，并且提供自动复制功能

![](https://imgur.com/Fs8EpGE.png)

我们就会改成

* 先做一个假功能，产生假的钱包地址
* 根据假的钱包地址产生 QRCODE
* 并且提供自动复制功能
* 请钱包工程师提供真的钱包地址

这样所有的进度，就不会把卡在钱包工程师的进度之上，而一无所获。

相反的，钱包工程师只要一做好这个功能，难度就像一个 "bug fix" 一样。

### 5. 每一次的版本都是完整版

有时候，我们没有办法一次性写到最完美的功能。比如说在 OTCBTC 当中，买卖家沟通的桥梁是一个能够上传付款截图的即时聊天室。

这个功能难度极度的高，是无法在一周之内就写完的。但是需要有这个聊天室的目的，是要让买卖方在交易当中能够「沟通」以及完成「付款交易」。

所以我们将 User Story 难度降低。

* 第一版降低到双方可以留言，并且上传截图（但是不能即时更新）
* 在第一版写完之后，第二版加上即时刷新功能
* 第三版，接上专业 pusher 第三方服务，重构成真正聊天室

这样不管上线时程如何，我们在哪个时间点，都有一个「聊天室」，只是破不破烂而已。

但不会「没有聊天室」可以用。

### 6. 每一个流程独立都开票

在开发中，我们并不会强求，在一张票里面完成所有细节。相反的，我们鼓励把：

对同一个功能的：

* 讨论
* 画面设计
* 后端实作
* UI 调整
* 测试验收

票全部切开独立进行。只是相互关连。这样的好处是不会让一张过长，上面有画面修改又有画面实做，一张票更新长度长达 50 个 update。我们实际上是避免有超长票出现，因为这种票会让程序员想死的心都有了。

短票能够让事情短时间有结论。一张一张的迭代开出来，一张一张的解掉。

### 切票大原则

整理一下我们的切票原则：

* 大脑当机就该切票
* 被人卡住就切票
* 每个半天都要解掉 1-3 张票
* 有问题就切割出去问，不要耽搁到开发进度
* 切到每张票都能够有「直接解法」。或者是该张票的「主要任务」就是「被切出去弃置」。

虽然感觉这种开票法，会开出非常多票。但是相对的，我们也在当中逐渐把很多细节厘清，并且搁置掉很多因为时间，预算，风险因素，所必须要放一边的待办事项。

虽然票越开越多，但是进度其实是会越来越快的。票开越多才不容易森林大火，因为开票实际上是划出防火巷的一个作法。

这就是为什么我们平均统计，我们一个项目立项到完成必须完成至少 600 个任务。就是利用这种方式加速与逼近。

### 指挥官任务

当然，下一个问题又会冒出来了。根据这样的方式，会有大量的票产生。难道是每个项目组成员自由开打吗？虽然每一阶段有主线，但是看起来支线是自由开打的，会不会方向没有办法被控制，到最后收不了场。

所以下一章，我们要介绍「指挥官任务」这个工具出现。
