# 第五章 - 敏捷开发以及 User Story

之前我在刚变成程序员时，对于一个网路产品怎么样建构出来。我是完全一无所知的。

## 瀑布式开发

当时一般比较大的网路公司是这样做的。所以假设一个产品需要六个月，以下是最常出现的时间线：

* 花了 3 - 4 個月的訪談需求
* 花了 1 個月請美術設計視覺與介面，以及反覆修改
* 最後剩下不到 两周再請 RD 进场写程式。

这种开发方式被称之为是瀑布式开发。先搜集完备规格再开工。

每周产品会议。PM 就会召集RD在会议室开会，"BrainStorming"。看看 PM 搜集到的需求，到底能不能做。

程序员往往对参加这样的会议会感到很痛苦。因为老是会出现这样的冲突：

* PM 可能觉得很容易，RD 觉得被侮辱了
* PM 觉得理所当然的功能，RD 身为重度使用者一看就知道不可行
* RD 一直枪掉 PM 的功能，PM 觉得 RD 不尊重业务专业与创意

瀑布式开发型的项目，当中的四五个月的时间，往往花在这些会议上。确保产出「完备的规格」。

等到拿到规格之后，才会再把这些规格交给视觉设计师设计介面。

设计师设计介面又需要花上几周，这期间反覆跟 PM 确认介面流程没有理解错误。

而这个流程到最后，当程序员开始接手实做时，距离上线日剩下两周时间。

这就是什么为什么多数的网络产品服务刚上线时网站都是破破烂烂的。

因为瀑布式开发型项目所有的时间，都被花在策划跟画图。

程序员面对这样的状况是很崩溃的。程序员不是不想打造好产品，但是这么庞大的产品架构，却只有这么少的实做时间。死线已经被压好了，不要说根本没有时间「写好」，光是「写完」都是奢望。

就算删掉一些没必要在第一版的功能与特效，其实也写不完。更何况在跳写的情况下，甚至「核心功能」也会不小心「被跳掉」。所以大家很常在坊间，看到刚宣布上线的完成品，结果 bug 一大堆。。。。。团队自己不满意，使用者每天都在抱怨。

这种事当然不是大家乐意见到的。改善的方式，当然是立刻抓紧时间每日加班改善。

但是，当把 bug 修得差不多之后，当初来尝鲜的使用者却已经走的差不多了。

此时团队开会检讨原因，归咎于是第一版缺乏许多市面上的核心功能，于是再度规划改版。后续团队继续努力了三个月，又奋力推出第二版。但是还不见起色，于是项目宣告 GG。

其实这样的轮回在网路创业公司，一天到晚都在上演。

然而这就是绝大多公司内部所谓的开发方式。

因为这样豪赌，一旦花时间赌输了，成本实在太大，但是又不知道有什么比较好的方式。所以我知道在大陆有些公司，为了要确保新产品上线万无一失，开发一个产品，是直接准备了三个团队一起开跑，哪个队先写好就用哪条线的产品。

## 敏捷式开发

当然大公司财大，可以玩这种拼命式开发的游戏。但是创业公司没办法，人就那么多。

我在参与了用瀑布式开发的两个产品后，开始隐隐约约觉得这件事不太对劲？难道流程就没办法变通吗？

一个项目真的是得收集完所有规格才能写吗？不能一边规划一边开发吗？

于是我找到一个新型态的协做方式 敏捷 Agile。有别于瀑布式开发，敏捷强调适应真实需求的快速变化。

### 什么是敏捷式开发？

2001年2月，Martin Fowler，Jim Highsmith等17位著名的软件开发专家齐聚在美国犹他州雪鸟滑雪圣地，举行了一次敏捷方法发起者和实践者的聚会。在这次会议上面，他们正式提出了Agile(敏捷开发)这个概念，并共同签署了《敏捷宣言》。

####　敏捷宣言

借着亲自并协助他人进行软体开发，
我们正致力于发掘更优良的软体开发方法。
透过这样的努力，我们已建立以下价值观：

个人与互动 重于 流程与工具
可用的软体 重于 详尽的文件
与客户合作 重于 合约协商
回应变化 重于 遵循计划

也就是说，虽然右侧项目有其价值，
但我们更重视左侧项目。

#### 敏捷宣言背后的原则

我们遵守这些原则：

我们最优先的任务，是透过及早并持续地交付有价值的软体来满足客户需求。

竭诚欢迎改变需求，甚至已处开发后期亦然。
敏捷流程掌控变更，以维护客户的竞争优势。

经常交付可用的软体，频率可以从数周到数个月，以较短时间间隔为佳。

业务人员与开发者必须在专案全程中天天一起工作。

以积极的个人来建构专案，给予他们所需的环境与支援，并信任他们可以完成工作。

面对面的沟通，是传递资讯给开发团队及团队成员之间效率最高且效果最佳的方法。

可用的软体是最主要的进度量测方法。

敏捷程序提倡可持续的开发。

赞助者，开发者及使用者应当能不断地维持稳定的步调。

持续追求优越的技术与优良的设计，以强化敏捷性。

精简──或最大化未完成工作量之技艺──是不可或缺的。

最佳的架构，需求与设计皆来自于能自我组织的团队。

团队定期自省如何更有效率，并据之适当地调整与修正自己的行为。

### 敏捷带来的作法以及其他带来的好处

敏捷式开发的项目有几个特点：

* 将软件切分为不同版本，逐步开发。而非一次性讨论与开发终局版本。
* 舍弃厚重的规格，每个开发循环版本里面，只实在当版本能够对客户有价值的功能
* 保持对计画的灵活性，若发现原始方向不对，立刻拥抱变化。
* 每日沟通与测试修正，让非开发人员也高度参与开发过程，确保交付出正确的软件
* 利用流程与代码，记载软件需求，而非撰写厚厚文件。

## User Story

敏捷式开发介绍了很多实用的工具，如：

* 每日站立会议（Standup Meeting) - 每日同步项目进度
* 用户故事 (User Story) - 取代原先规格，以用户真正会在系统里面完成的有价值的事去叙述架构与开发方向
* 看板方法 ( Kanban Method) - 把待办事项分为　未实做 / 实做中 / 已完成。一目了然项目进度

都是尽量在减少项目开发者的负担，并且尽量以小步快跑的方式，快速推动软件循环。

跟一般瀑布式开发很大的不同点在于，敏捷式开发的项目，往往不写规格。而是采用用户故事的方式，叠砌起项目全貌。

### 什么是 User Story？

瀑布式开发典型的流程是 PM 花上很多的时间进行访谈写成规格，程序员再根据规格开发「转换」成功能。不过在这段过程当中，却容易出现相当大的沟通落差与实做风险。

这当中的差距在于所谓「规格」，往往强调于「画面的细节」或者是「功能的实现」，有时候叠著叠著，双方都忘记原本为什么这个功能要出现。很可能功能写出来了，却没有帮忙使用者完成任何有价值的工作。或者是功能根本就写错方向。

软件开发的目的应该是让「使用者能够在系统上完成有价值的事」。

既然如此，我们应该回归本质。

User Story 就是一种新的叙述文版，强调透过简单的语境，具体的描述出软体在「使用者」的手上，是怎么样被「操作」的。透过一个一个使用场景，整理出会在这个系统里面出现的「角色」以及「会完成的工作与价值」。

举例来说，User Story 的范本如下：

> 作为一个 (某个角色) 使用者，我可以做 (某个功能) 事情，如此可以有 (某个商业价值) 的好处。

这里是一些 User Stories 的范例

> * 使用者可以在网站上张贴履历
> * 使用者可以搜寻有哪些工作
> * 公司可以张贴新工作
> * 使用者可以限制谁可以看到他的履历

相单简单直观。

有一些刚开始使用「用户故事」的朋友，可能会怀疑这样的规划「太过简陋」。

其实不然，一个网站的实做价值与「主要功能」，大概用 10-20 条用户故事就可以叙述完毕了。

我认为与传统开发方式角度最大的不同，是敏捷式开发体悟到世界上的项目是活的，且是不断演化的。而产品开发的重点在于必须产出真正有价值有意义的结果。

### 以角色为轴心，找出被掩盖的复杂度

User Story 撰写是以角色作为划分：身为「什么角色」，我要「做什么事情」。

在瀑布式开发流程中，很多时后代码会写不完是因为「里面有隐藏的角色」，比如说

#### 例子1

部落格后台应该「要有后台管理介面」。光是有「这个后台管理介面」，背后就隐藏著「一个后台管理员的角色」，加入这个角色所需要做的动作开发量几乎就是 2 倍！（因为后台管理员可以在后台管理编辑所有文章，几乎等于要重写类似文章发表编辑的功能，只是在另外一个「管理后台」）

#### 例子2

又比如说网路电商网站「应该要有对帐号台」。背后就隐藏著「一个会计角色」，加入这个角色所需要的额外开发量几乎是难以估计。因为对帐需求真是千奇百怪。

绝大多数的瀑布式开发，都是被这种「隐藏式功能」搞爆工作量的。


透过 User Story 方式，我们可以提早把这个项目里面「有多少角色」以及「有多少要完成的事」先估算出来。甚至把暂时把「不重要角色」要做的事先屏蔽掉。

完全可以光用几张 A4纸，就能将第一版工作量的粗估出来。后续再依项目时程人力，工作量与优先权删减迭代。

* 哪些是在头几个礼拜就要先实做的，否则会阻挡后面开发
* 有哪些功能是可以在上线前再添加。甚至是上线后再做也不迟。
* 哪些功能是完全没必要存在

这些功能将在一个一个迭代循环之中，被实做或被舍弃

我开始改用 User Story 这个方式规划软件项目后，项目的工时，几乎减少了 2/3。从六个月降到两个月。

## 如何撰写 User Story

### 第一版

（第一版的 User Story 可以不用很复杂）

* 使用者可以在网站上张贴广告卖币
* 使用者可以在网站上张贴广告买币
* 使用者可以在网站上看到广告下单买币
* 使用者可以在网站上看到广告下单卖币

### 第二版

（我们发现其实这两个流程是重复的，为了避免前期开发太过复杂，因此决定先做发广告卖币，下单买币）

* 身为一个商家，我要能够在后台上架卖币广告，并且设定上架贩卖
* 身为一个消费者，我要能够在前台看到广告，并且下单购买


（这时候明确引入角色）

### 第三版

（把隐藏的前期细节加入）

* 身为一个商家，我要能够在后台上架卖币广告，并且设定上架贩卖
  - 使用者必须要充值数字币进来，有足够的馀额，才能够上架广告
* 身为一个消费者，我要能够在前台看到广告，并且下单购买
  - 使用者必须经过身分认证，才能使用下单购买功能

### 第四版

（将隐藏的功能梳理出来，变成主要大功能）


* 身为一个商家，我要能够在后台上架卖币广告，并且设定上架贩卖
* 身为一个消费者，我要能够在前台看到广告，并且下单购买
* 身为一个使用者，必须在站上拥有数字货币钱包，进行充值 / 提币
* 身为一个使用者，必须经过身份验证功能，才能使用完整功能
* 身为一个使用者，为了确保资产安全，必须绑定联系方式

（这个时候，把主要的 Must Have 找出来）

### 第五版

（展开主要大功能，继续展开 Must Have 里面的细节）

* 身为一个商家，我要能够在后台上架卖币广告，并且设定上架贩卖
  - 身为一个卖家，可以在管理后台上架广告
  - 身为一个卖家，可以在发布广告时调整价格
  - 身为一个卖家，广告锚定的应该是全球 BTC 行情均价
  - 身为一个卖家，可以在买币者下单后，与卖家沟通进行交易
  - 身为一个卖家，可以在买币者付完钱打款后，释放数字货币给对方
  - 身为一个卖家，可以在买币者下单后，收到通知后，立即处理订单
* 身为一个消费者，我要能够在前台看到广告，并且下单购买
  - 身为一个消费者，可以在前台看到下单广告列表
  - 身为一个消费者，可以在前台看到广告内容详情
  - 身为一个消费者，可以在下单后，与卖家沟通进行交易
  - 身为一个消费者，下单之后，卖家数字币必须进行锁定，确保交易安全
* 身为一个使用者，必须在站上拥有数字货币钱包，进行充值 / 提币
  - 身为一个使用者，可以申请一个钱包 (BTC/ETH)
  - 身为一个使用者，申请钱包后，可以拿到一个数字钱包地址
    - 身为一个使用者，可以充值到钱包地址（6个确认后到帐）
  - 身为一个使用者，可以发起提币
* 身为一个使用者，必须经过身份验证功能，才能使用完整功能
  - 身为一个使用者，必须通过 email 验证
  - 身为一个使用者，必须通过 实名 验证（身份证）
  - 身为一个使用者，必须通过 进阶 验证（银行卡）
* 身为一个使用者，为了确保资产安全，必须绑定联系方式
  - 身为一个使用者，必须通过 email 验证
  - 身为一个使用者，必须绑定二步验证

## 重构式开发

一般来说。写到第五版。一个网站大制的大骨架就会出来。

* 大骨架在完稿时大概会是 20 条上下的主要框架
* 中骨架是在大骨架下继续展开的 Must Have 功能，展开后大概会有 100 条。
* 这 100 条里面有更小的细节，最后扩展会最终会达到大至上 1000 条左右的规模。

我们会在大骨架完稿后，先做一版流程图，确定业务逻辑方向不会被这些细节冲散。

![](https://i.imgur.com/FreVmX6.png)
![](https://i.imgur.com/iN3OsBu.png)
![](https://i.imgur.com/wimc4O6.png)

### 重构式开发

拿到主动线后。团队的主程，在开发时，并不会优先实做各个画面的细节。而是会直接把每一个大的 User Story 的画面骨干，先扑成一个完整的 Workflow。然后团队再以"重构"的方式，去补完每个画面的细节。

发布广告(以OTCBTC为例)

![](https://imgur.com/93FIfGu.png)

广告列表(以OTCBTC为例)

![](https://imgur.com/eoLDrH2.png)

下单页面(以OTCBTC为例)

![](https://imgur.com/vTT3FIO.png)

订单内容(以OTCBTC为例)

![](https://imgur.com/vTT3FIO.png)

钱包的演变流程

![](https://imgur.com/Fs8EpGE.png)

重构式开发的好处，在于在第一周动工时，就有一个非常粗糙的 1.0 版本。能让整个团队成员知道目前系统有多少条确定的「闭环功能主线」，骨架非常明确，有了明确的工作方向以及工作量预估。

接著整个团队就能够以「重构每个功能画面」为目标去前进。程序员可以专注完善该功能的细节。美术设计可以专注设计该功能的画面。达到平行开发的目的。（各自完工后再整合）

## 如何控制复杂度


# 做产品怎么控制复杂度

然后讲到就是我就是被一连串沉重的打击，然后所以第三部分呢我就会讲我我我做产品怎么样叠代呢？大家都知道我是怎么样走入这个嗯困境的，那我必需要再次重覆喔，交易所这个水很深喔，大家不要想说这个很好赚，因为当然我现在讲大家都觉得是屁话，都是都是不想要让反正就是交易所真的水很深，水很深的原因是我们当初为什么会选这个这个呢除了第一个我们的法律上可以很快的做之外，我们当时已经做了一个钱包然后呢我们觉得我们前面盖一个淘宝，然后这样就可以开始淘钱了，但是呢不是这样子的，我们做了以后呢？发现不止我们要做个淘宝还要再加一个阿里旺旺，本来想说我们要在三十天之内然后免费淘宝跟阿里旺旺，可是那时候同事已经很崩溃了，很崩溃了以后我们发现这不是最崩溃的，还不止还不止喔，原本呢因为我们是外行人嘛，所以呢我们原本就以为就是只要让人家刊登一个卖币的广告，人家来买币就行了，但是给人家试用以后就谈然后人家是用预算币[00:01:42]，那我的熟空币怎么办？那时候说对喔熟空币的汽球，所以要做双向的，然后我就昏倒，因为你要知道我们做产品有User story就是使用者会在这网站上发生什么故事，你只要雇一个角色，你的你的feature就是次方，假设你有两个人就是X的平方，如果你有三个角色你就是三次方，所以我们就一个月之内要上线然后又忙这件事情，然后来呢是说嗯我们的网站上面支援BTC，但是那些用户说其实我们以太坊没有需求各自己的以太坊，情庸必力[00:02:20]还要支援以太坊，这还不是最崩溃的，最崩溃的是要上线的前一个礼拜，我跟国仁说，你就站在你们的简体网站里面，繁体也不输，我说我不用不给不给台湾人玩，他们说你白痴吗？那个你放在简体网站就是此地无银三百两，这样子你还是要弄个那个嗯团体中文奖，所以你是台湾公司吗？然后说不对我原本是台湾公司啊！但是还是要做这个东西喔，这个，一定要做这个东西，这我少放了二十张图，结果因为后面有二十个，二十个人心里会崩溃了。


那如何，所以这边要分享是说如何控制复杂度，因为我们在短时间之内发现了我们的feature，其实我们做不完，但是我们因为要在一个月之内上线我们达怎么样做到这件事情的，跟各位讲一个，如何做到？其实很简单，我们骗员工只要做一个功能就行了，就骗他，我们那时候他们是说老板为什么我要做双向，我说只第一个礼拜我们可以买十天，第二个礼拜在做的时候你就骗他说只能单向让使用者买币，然后伤战前三天还说，其实我们还是要支援，然后就崩溃了，这次崩溃也没关系，因为我们前面的流程已经顺好了，所以要改版再加一个user，嗯就没有这么困难，我说我们就心无旁物的先冲来第二版，那他们就说唉老板使用者说要做支援这以太坊，我说没关系我们暂时不支援以太坊，然后他就前言就说，喔其实我们还是要支援的，然后就打开，那是因为我们架构都已经做好，所以页面不会纠缠来纠缠去，我们设计的时候不用扯牵扯到那么细结，就变成只是加一个选项，不会那么传统你是要加一个以太坊钱包，你还是要接要接一个礼拜，但是我们以前就接过运作ICO.Info的时候就已经有以太坊钱包做我们的分支，就是打开一个选项就架构都好了。


## OTCBTC 与 ICOINFO 的 User Story

## Q & A

## 创业点子如何排 User Story 优先级

接下來我會將 Key Result 再次區分，用 MosCow Method 排優先權。

MosCow Method 是把所有的需求照

Must have
Should have
Could have
Won't have
的方式區分。

MosCow Method 配合時間倒序的專案管理方式特別有效。如果是用正向順序進行專案管理，人們往往會將需求通通定義為「Must Have」。

而如果將 Key Result 鎖在在有限的時間內，反而會迫使人們去決定重要順序。所有人的精力只會 Focus 在 Must have 與 Should have。

團隊可以在很短的時間，不拖泥帶水的取得 MVP 與 small wins。這正是 Startup 最需要的戰果。
